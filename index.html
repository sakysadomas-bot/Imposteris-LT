<!DOCTYPE html>
<html lang="lt">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ApsimetÄ—lis</title>

<style>
body {
    margin: 0;
    background: #0b132b;
    color: white;
    font-family: -apple-system, BlinkMacSystemFont, Arial;
}
.app {
    max-width: 420px;
    margin: auto;
    padding: 20px;
    text-align: center;
}
.hidden { display: none; }
h1 { font-size: 26px; }

button {
    width: 100%;
    padding: 16px;
    margin-top: 12px;
    font-size: 18px;
    border-radius: 14px;
    border: none;
    background: #5bc0be;
    font-weight: bold;
}

.options {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 10px;
    margin-top: 20px;
}

.option {
    padding: 14px;
    background: #1c2541;
    border-radius: 12px;
    font-size: 18px;
}

.word {
    font-size: 32px;
    margin-top: 30px;
    color: #6fffe9;
    white-space: pre-line;
}

.overlay {
    position: fixed;
    inset: 0;
    background: black;
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 10;
    text-align: center;
}
</style>
</head>

<body>

<div class="overlay" id="overlay">
    <div>
        ğŸ“µ Perduok telefonÄ…<br><br>
        <button onclick="nextPlayer()">TÄ™sti</button>
    </div>
</div>

<div class="app">

<h1 id="title">ğŸ­ ApsimetÄ—lis</h1>

<!-- 1 ETAPAS -->
<div id="step1">
    <p>Pasirink Å¾aidÄ—jÅ³ skaiÄiÅ³</p>
    <div class="options">
        <div class="option" onclick="setPlayers(3)">3</div>
        <div class="option" onclick="setPlayers(4)">4</div>
        <div class="option" onclick="setPlayers(5)">5</div>
        <div class="option" onclick="setPlayers(6)">6</div>
        <div class="option" onclick="setPlayers(7)">7</div>
        <div class="option" onclick="setPlayers(8)">8</div>
        <div class="option" onclick="setPlayers(9)">9</div>
        <div class="option" onclick="setPlayers(10)">10</div>
    </div>
</div>

<!-- 2 ETAPAS -->
<div id="step2" class="hidden">
    <p>Pasirink apsimetÄ—liÅ³ skaiÄiÅ³</p>
    <div class="options">
        <div class="option" onclick="setImposters(1)">1</div>
        <div class="option" onclick="setImposters(2)">2</div>
        <div class="option" onclick="setImposters(3)">3</div>
    </div>
</div>

<!-- 3 ETAPAS -->
<div id="step3" class="hidden">
    <p>Kiek laiko rodyti tekstÄ…?</p>
    <div class="options">
        <div class="option" onclick="setTime(1500)">1.5 s</div>
        <div class="option" onclick="setTime(2000)">2 s</div>
        <div class="option" onclick="setTime(3000)">3 s</div>
        <div class="option" onclick="setTime(4000)">4 s</div>
    </div>
</div>

<!-- Å½AIDIMAS -->
<div id="game" class="hidden">
    <h2 id="playerText"></h2>
    <button onclick="showWord()">Rodyti</button>
    <div class="word" id="word"></div>
</div>

<!-- PABAIGA -->
<div id="end" class="hidden">
    <h2>ğŸ§ Å½aidimas prasideda!</h2>
    <button onclick="location.reload()">Å½aisti dar kartÄ…</button>
</div>

</div>

<script>
const words = [
"katÄ—","pica","mokykla","telefonas","dviratis","filmas","miestas",
"lietus","detektyvas","Å¾aidimas","kava","kalnas","miÅ¡kas","ligoninÄ—"
];

let playerCount = 0;
let imposterCount = 0;
let showTime = 3000;
let players = [];
let current = 0;

function vibrate() {
    if (navigator.vibrate) navigator.vibrate(200);
}

function setPlayers(n){
    playerCount = n;
    step1.classList.add("hidden");
    step2.classList.remove("hidden");
}

function setImposters(n){
    if(n >= playerCount) return alert("Per daug apsimetÄ—liÅ³!");
    imposterCount = n;
    step2.classList.add("hidden");
    step3.classList.remove("hidden");
}

function setTime(t){
    showTime = t;
    step3.classList.add("hidden");
    startGame();
}

function startGame(){
    const word = words[Math.floor(Math.random()*words.length)];
    players = Array(playerCount).fill(word);

    let chosen = [];
    while(chosen.length < imposterCount){
        let r = Math.floor(Math.random()*playerCount);
        if(!chosen.includes(r)) chosen.push(r);
    }

    chosen.forEach(i=>{
        players[i] = "TU APSIMETÄ–LIS\nBandyk neiÅ¡duoti, kad neturi Å¾odÅ¾io";
    });

    current = 0;
    game.classList.remove("hidden");
    playerText.innerText = "Å½aidÄ—jas 1";
}

function showWord(){
    vibrate();
    word.innerText = players[current];
    setTimeout(()=>{
        word.innerText = "";
        overlay.style.display = "flex";
    }, showTime);
}

function nextPlayer(){
    overlay.style.display = "none";
    current++;
    if(current < players.length){
        playerText.innerText = `Å½aidÄ—jas ${current+1}`;
    } else {
        game.classList.add("hidden");
        end.classList.remove("hidden");
    }
}
</script>

</body>
</html>
