<!DOCTYPE html>
<html lang="lt">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ApsimetÄ—lis</title>

<style>
body {
  margin: 0;
  font-family: system-ui, sans-serif;
  background: #0f172a;
  color: white;
  text-align: center;
}
.screen {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  justify-content: center;
  gap: 16px;
  padding: 20px;
}
select, button {
  padding: 14px;
  font-size: 18px;
  border-radius: 12px;
  border: none;
}
button {
  background: #22c55e;
  color: black;
  font-weight: bold;
}
button:disabled {
  background: #555;
}
.hidden { display: none; }
#overlay {
  position: fixed;
  inset: 0;
  background: black;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 24px;
  padding: 20px;
}
</style>
</head>

<body>

<!-- SETUP -->
<div id="setup" class="screen">
  <h1>ApsimetÄ—lis</h1>

  <select id="players">
    <option value="3">3 Å¾aidÄ—jai</option>
    <option value="4">4</option><option value="5">5</option>
    <option value="6">6</option><option value="7">7</option>
    <option value="8">8</option><option value="9">9</option>
    <option value="10">10</option>
  </select>

  <select id="imposters">
    <option value="1">1 apsimetÄ—lis</option>
    <option value="2">2 apsimetÄ—liai</option>
    <option value="3">3 apsimetÄ—liai</option>
  </select>

  <select id="theme">
    <option value="marvel">Marvel</option>
    <option value="pandora">Pandora</option>
    <option value="lt">LietuviÅ¡ka</option>
  </select>

  <select id="level">
    <option value="beginner">Beginner</option>
    <option value="average">Average</option>
    <option value="mastermind">Mastermind</option>
  </select>

  <select id="time">
    <option value="1500">1.5 s</option>
    <option value="2000">2 s</option>
    <option value="3000">3 s</option>
    <option value="4000">4 s</option>
  </select>

  <button onclick="startGame()">PradÄ—ti</button>
</div>

<!-- GAME -->
<div id="game" class="screen hidden">
  <h2 id="playerLabel"></h2>
  <button id="showBtn" onclick="showWord()">Rodyti</button>
</div>

<!-- END -->
<div id="end" class="screen hidden">
  <h1>Å½aidimas prasidÄ—jo ğŸ¥</h1>
  <button onclick="location.reload()">Å½aisti dar kartÄ…</button>
</div>

<div id="overlay" class="hidden"></div>

<script>
const themes = {
  marvel: {
    beginner: [
      "Spider-Man","Iron Man","Hulk","Thor","Captain America","Avengers","Superherojus"
    ],
    average: [
      "Spider-Man","Iron Man","Thor","Hulk","Loki","Thanos","Doctor Strange","Black Panther","Piktadarys"
    ],
    mastermind: [
      "Didelis mÅ«Å¡is","Super galios","HerojÅ³ komanda","Final battle","Blogas planas","Pasaulio pabaiga"
    ]
  },

  pandora: {
    beginner: [
      "Avatar","Pandora","MÄ—lyni Å¾monÄ—s","DÅ¾iunglÄ—s","Gamta","Flying creatures"
    ],
    average: [
      "Avatar","Pandora","Na'vi","Pandoros dÅ¾iunglÄ—s","Gentis","Floating mountains"
    ],
    mastermind: [
      "Svetima planeta","Kova dÄ—l planetos","Å½monÄ—s prieÅ¡ gamtÄ…","Didelis konfliktas","Survival"
    ]
  },

  lt: {
    beginner: [
      "Namai","Mokykla","PaplÅ«dimys","Parkas","Pica","Ledai","Å uo","KatÄ—"
    ],
    average: [
      "Atostogos","KelionÄ—","MiÅ¡kas","EÅ¾eras","Sportas","Telefonas","Å½aidimas","Kinas"
    ],
    mastermind: [
      "Apsimetimas","Paslaptis","Strategija","Komanda","IÅ¡davystÄ—","Ä®tarimas"
    ]
  }
};

let playersData = [];
let current = 0;
let showTime = 2000;
let locked = false;

function vibrate() {
  if (navigator.vibrate) navigator.vibrate(200);
}

function startGame() {
  const p = +players.value;
  const i = +imposters.value;
  showTime = +time.value;

  const list = themes[theme.value][level.value];
  const word = list[Math.floor(Math.random() * list.length)];

  playersData = Array(p).fill(word);

  let imp = [];
  while (imp.length < i) {
    let r = Math.floor(Math.random() * p);
    if (!imp.includes(r)) imp.push(r);
  }

  imp.forEach(n => {
    playersData[n] = "TU APSIMETÄ–LIS â€“ bandyk neiÅ¡duoti, kad neturi Å¾odÅ¾io";
  });

  setup.classList.add("hidden");
  game.classList.remove("hidden");
  playerLabel.innerText = "Å½aidÄ—jas 1";
}

function showWord() {
  if (locked) return;
  locked = true;
  showBtn.disabled = true;

  vibrate();
  overlay.innerText = playersData[current];
  overlay.classList.remove("hidden");

  let duration = showTime;
  if (playersData[current].startsWith("TU APSIMETÄ–LIS") && showTime < 3500) {
    duration = 3500;
  }

  setTimeout(() => {
    overlay.classList.add("hidden");
    nextPlayer();
  }, duration);
}

function nextPlayer() {
  current++;
  locked = false;
  showBtn.disabled = false;

  if (current < playersData.length) {
    playerLabel.innerText = "Å½aidÄ—jas " + (current + 1);
  } else {
    game.classList.add("hidden");
    end.classList.remove("hidden");
    new Audio("https://actions.google.com/sounds/v1/drums/drum_roll.ogg").play();
  }
}
</script>

</body>
</html>
